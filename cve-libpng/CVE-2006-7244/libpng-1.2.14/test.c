#include <stdio.h>
#include "png.h"
int main(int argc,char *argv[])
{
	FILE *fin,*fout;
	png_structp read_ptr,write_ptr;
	fin = fopen("pngtest.png","rb");

	fout = fopen("out.png","wb");
	png_infop read_info_ptr,write_info_ptr;
	
	read_ptr = png_create_read_struct(PNG_LIBPNG_VER_STRING, png_voidp_NULL,png_error_ptr_NULL, png_error_ptr_NULL);
    read_info_ptr = png_create_info_struct(read_ptr);

	write_ptr = png_create_write_struct(PNG_LIBPNG_VER_STRING, png_voidp_NULL,
			      png_error_ptr_NULL, png_error_ptr_NULL);

	write_info_ptr = png_create_info_struct(write_ptr);
    png_init_io(read_ptr, fin);
	png_init_io(write_ptr, fout);

	png_read_info(read_ptr,read_info_ptr);
	png_write_info_before_PLTE(write_ptr, write_info_ptr);
	return 0;
}
